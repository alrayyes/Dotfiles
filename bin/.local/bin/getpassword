#!/bin/bash

case $1 in
  gmail) SERVER="imap.gmail.com"; LOGIN="alrayyes@gmail.com";; 
  andthensome) SERVER="imap.gmail.com"; LOGIN="ryan@andthensome.nl";; 
  ryankes) SERVER="imap.mailbox.org"; LOGIN="ryan@ryankes.eu";; 
  rss) SERVER="rss.higherlearning.eu"; LOGIN="alrayyes";; 
  man | kangaroo ) echo -n "two";;
  *) echo "Unknown argument!"; exit 1;;
esac

PATTERN="machine $SERVER login $LOGIN"
gpg2 -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk -v pattern="$PATTERN" '$0~pattern {print $NF}'
